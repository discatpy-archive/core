# SPDX-License-Identifier: MIT

# this file was auto-generated by scripts/generate_endpoints.py

import typing as t

import discord_typings as dt

from ...types import Unset, UnsetOr
from ..route import Route
from .core import EndpointMixin

__all__ = ("GuildEndpoints",)


class GuildEndpoints(EndpointMixin):
    def create_guild(
        self,
        *,
        name: str,
        icon: UnsetOr[str] = Unset,
        verification_level: UnsetOr[dt.VerificationLevels] = Unset,
        default_message_notifications: UnsetOr[dt.DefaultMessageNotificationLevels] = Unset,
        explicit_content_filter: UnsetOr[dt.ExplicitContentFilterLevels] = Unset,
        roles: UnsetOr[list[dt.RoleData]] = Unset,
        channels: UnsetOr[list[dt.PartialChannelData]] = Unset,
        afk_channel_id: UnsetOr[dt.Snowflake] = Unset,
        afk_timeout: UnsetOr[int] = Unset,
        system_channel_id: UnsetOr[dt.Snowflake] = Unset,
        system_channel_flags: UnsetOr[int] = Unset,
    ):
        return self.request(
            Route("POST", "/guilds"),
            json_params={
                "name": name,
                "icon": icon,
                "verification_level": verification_level,
                "default_message_notifications": default_message_notifications,
                "explicit_content_filter": explicit_content_filter,
                "roles": roles,
                "channels": channels,
                "afk_channel_id": afk_channel_id,
                "afk_timeout": afk_timeout,
                "system_channel_id": system_channel_id,
                "system_channel_flags": system_channel_flags,
            },
        )

    def get_guild(self, guild_id: dt.Snowflake, *, with_counts: bool = False):
        return self.request(
            Route("GET", "/guilds/{guild_id}", guild_id=guild_id),
            query_params={"with_counts": with_counts},
        )

    def get_guild_preview(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/preview", guild_id=guild_id))

    def modify_guild(
        self,
        guild_id: dt.Snowflake,
        *,
        name: UnsetOr[str] = Unset,
        icon: UnsetOr[t.Optional[str]] = Unset,
        verification_level: UnsetOr[t.Optional[dt.VerificationLevels]] = Unset,
        default_message_notifications: UnsetOr[
            t.Optional[dt.DefaultMessageNotificationLevels]
        ] = Unset,
        explicit_content_filter: UnsetOr[t.Optional[dt.ExplicitContentFilterLevels]] = Unset,
        afk_channel_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        afk_timeout: UnsetOr[int] = Unset,
        system_channel_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        system_channel_flags: UnsetOr[int] = Unset,
        owner_id: UnsetOr[dt.Snowflake] = Unset,
        splash: UnsetOr[t.Optional[str]] = Unset,
        discovery_splash: UnsetOr[t.Optional[str]] = Unset,
        banner: UnsetOr[t.Optional[str]] = Unset,
        rules_channel_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        public_updates_channel_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        preferred_locale: UnsetOr[t.Optional[str]] = Unset,
        features: UnsetOr[list[str]] = Unset,
        description: UnsetOr[t.Optional[str]] = Unset,
        premium_progress_bar_enabled: UnsetOr[bool] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}", guild_id=guild_id),
            json_params={
                "name": name,
                "icon": icon,
                "verification_level": verification_level,
                "default_message_notifications": default_message_notifications,
                "explicit_content_filter": explicit_content_filter,
                "afk_channel_id": afk_channel_id,
                "afk_timeout": afk_timeout,
                "system_channel_id": system_channel_id,
                "system_channel_flags": system_channel_flags,
                "owner_id": owner_id,
                "splash": splash,
                "discovery_splash": discovery_splash,
                "banner": banner,
                "rules_channel_id": rules_channel_id,
                "public_updates_channel_id": public_updates_channel_id,
                "preferred_locale": preferred_locale,
                "features": features,
                "description": description,
                "premium_progress_bar_enabled": premium_progress_bar_enabled,
            },
            reason=reason,
        )

    def delete_guild(self, guild_id: dt.Snowflake):
        return self.request(Route("DELETE", "/guilds/{guild_id}", guild_id=guild_id))

    def get_guild_channels(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/channels", guild_id=guild_id))

    def create_guild_channel(
        self,
        guild_id: dt.Snowflake,
        *,
        name: str,
        type: UnsetOr[t.Optional[dt.ChannelTypes]] = Unset,
        topic: UnsetOr[t.Optional[str]] = Unset,
        bitrate: UnsetOr[t.Optional[int]] = Unset,
        user_limit: UnsetOr[t.Optional[int]] = Unset,
        rate_limit_per_user: UnsetOr[t.Optional[int]] = Unset,
        position: UnsetOr[t.Optional[int]] = Unset,
        permission_overwrites: UnsetOr[t.Optional[list[dt.PermissionOverwriteData]]] = Unset,
        parent_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        nsfw: UnsetOr[t.Optional[bool]] = Unset,
        rtc_region: UnsetOr[t.Optional[str]] = Unset,
        video_quality_mode: UnsetOr[t.Optional[dt.VideoQualityModes]] = Unset,
        default_auto_archive_duration: UnsetOr[t.Optional[int]] = Unset,
        default_reaction_emoji: UnsetOr[t.Optional[dt.DefaultReactionData]] = Unset,
        available_tags: UnsetOr[t.Optional[list[dt.ForumTagData]]] = Unset,
        default_sort_order: UnsetOr[t.Optional[int]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("POST", "/guilds/{guild_id}/channels", guild_id=guild_id),
            json_params={
                "name": name,
                "type": type,
                "topic": topic,
                "bitrate": bitrate,
                "user_limit": user_limit,
                "rate_limit_per_user": rate_limit_per_user,
                "position": position,
                "permission_overwrites": permission_overwrites,
                "parent_id": parent_id,
                "nsfw": nsfw,
                "rtc_region": rtc_region,
                "video_quality_mode": video_quality_mode,
                "default_auto_archive_duration": default_auto_archive_duration,
                "default_reaction_emoji": default_reaction_emoji,
                "available_tags": available_tags,
                "default_sort_order": default_sort_order,
            },
            reason=reason,
        )

    def modify_guild_channel_positions(
        self,
        guild_id: dt.Snowflake,
        *,
        id: dt.Snowflake,
        position: UnsetOr[t.Optional[int]] = Unset,
        lock_permissions: UnsetOr[t.Optional[bool]] = Unset,
        parent_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}/channels", guild_id=guild_id),
            json_params={
                "id": id,
                "position": position,
                "lock_permissions": lock_permissions,
                "parent_id": parent_id,
            },
        )

    def list_active_guild_threads(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/threads/active", guild_id=guild_id))

    def get_guild_member(self, guild_id: dt.Snowflake, user_id: dt.Snowflake):
        return self.request(
            Route("GET", "/guilds/{guild_id}/members/{user_id}", guild_id=guild_id, user_id=user_id)
        )

    def list_guild_members(
        self, guild_id: dt.Snowflake, *, limit: int = 1, after: UnsetOr[dt.Snowflake] = Unset
    ):
        return self.request(
            Route("GET", "/guilds/{guild_id}/members", guild_id=guild_id),
            query_params={"limit": limit, "after": after},
        )

    def search_guild_members(self, guild_id: dt.Snowflake, *, query: str, limit: int = 1):
        return self.request(
            Route("GET", "/guilds/{guild_id}/members/search", guild_id=guild_id),
            query_params={"query": query, "limit": limit},
        )

    def add_guild_member(
        self,
        guild_id: dt.Snowflake,
        user_id: dt.Snowflake,
        *,
        access_token: str,
        nick: UnsetOr[str] = Unset,
        roles: UnsetOr[list[dt.Snowflake]] = Unset,
        mute: UnsetOr[bool] = Unset,
        deaf: UnsetOr[bool] = Unset,
    ):
        return self.request(
            Route(
                "PUT", "/guilds/{guild_id}/members/{user_id}", guild_id=guild_id, user_id=user_id
            ),
            json_params={
                "access_token": access_token,
                "nick": nick,
                "roles": roles,
                "mute": mute,
                "deaf": deaf,
            },
        )

    def modify_guild_member(
        self,
        guild_id: dt.Snowflake,
        user_id: dt.Snowflake,
        *,
        nick: UnsetOr[t.Optional[str]] = Unset,
        roles: UnsetOr[t.Optional[list[dt.Snowflake]]] = Unset,
        mute: UnsetOr[t.Optional[bool]] = Unset,
        deaf: UnsetOr[t.Optional[bool]] = Unset,
        channel_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        communication_disabled_until: UnsetOr[t.Optional[str]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route(
                "PATCH", "/guilds/{guild_id}/members/{user_id}", guild_id=guild_id, user_id=user_id
            ),
            json_params={
                "nick": nick,
                "roles": roles,
                "mute": mute,
                "deaf": deaf,
                "channel_id": channel_id,
                "communication_disabled_until": communication_disabled_until,
            },
            reason=reason,
        )

    def modify_current_member(
        self,
        guild_id: dt.Snowflake,
        *,
        nick: UnsetOr[t.Optional[str]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}/members/@me", guild_id=guild_id),
            json_params={"nick": nick},
            reason=reason,
        )

    def add_guild_member_role(
        self,
        guild_id: dt.Snowflake,
        user_id: dt.Snowflake,
        role_id: dt.Snowflake,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route(
                "PUT",
                "/guilds/{guild_id}/members/{user_id}/roles/{role_id}",
                guild_id=guild_id,
                user_id=user_id,
                role_id=role_id,
            ),
            reason=reason,
        )

    def remove_guild_member_role(
        self,
        guild_id: dt.Snowflake,
        user_id: dt.Snowflake,
        role_id: dt.Snowflake,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route(
                "DELETE",
                "/guilds/{guild_id}/members/{user_id}/roles/{role_id}",
                guild_id=guild_id,
                user_id=user_id,
                role_id=role_id,
            ),
            reason=reason,
        )

    def remove_guild_member(
        self, guild_id: dt.Snowflake, user_id: dt.Snowflake, reason: t.Optional[str] = None
    ):
        return self.request(
            Route(
                "DELETE", "/guilds/{guild_id}/members/{user_id}", guild_id=guild_id, user_id=user_id
            ),
            reason=reason,
        )

    def get_guild_bans(
        self,
        guild_id: dt.Snowflake,
        *,
        limit: int = 1000,
        before: UnsetOr[dt.Snowflake] = Unset,
        after: UnsetOr[dt.Snowflake] = Unset,
    ):
        return self.request(
            Route("GET", "/guilds/{guild_id}/bans", guild_id=guild_id),
            query_params={"limit": limit, "before": before, "after": after},
        )

    def get_guild_ban(self, guild_id: dt.Snowflake, user_id: dt.Snowflake):
        return self.request(
            Route("GET", "/guilds/{guild_id}/bans/{user_id}", guild_id=guild_id, user_id=user_id)
        )

    def create_guild_ban(
        self,
        guild_id: dt.Snowflake,
        user_id: dt.Snowflake,
        *,
        delete_message_seconds: UnsetOr[int] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("PUT", "/guilds/{guild_id}/bans/{user_id}", guild_id=guild_id, user_id=user_id),
            json_params={"delete_message_seconds": delete_message_seconds},
            reason=reason,
        )

    def remove_guild_ban(
        self, guild_id: dt.Snowflake, user_id: dt.Snowflake, reason: t.Optional[str] = None
    ):
        return self.request(
            Route(
                "DELETE", "/guilds/{guild_id}/bans/{user_id}", guild_id=guild_id, user_id=user_id
            ),
            reason=reason,
        )

    def get_guild_roles(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/roles", guild_id=guild_id))

    def create_guild_role(
        self,
        guild_id: dt.Snowflake,
        *,
        name: UnsetOr[str] = Unset,
        permissions: UnsetOr[str] = Unset,
        color: UnsetOr[int] = Unset,
        hoist: UnsetOr[bool] = Unset,
        icon: UnsetOr[t.Optional[str]] = Unset,
        unicode_emoji: UnsetOr[t.Optional[str]] = Unset,
        mentionable: UnsetOr[bool] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("POST", "/guilds/{guild_id}/roles", guild_id=guild_id),
            json_params={
                "name": name,
                "permissions": permissions,
                "color": color,
                "hoist": hoist,
                "icon": icon,
                "unicode_emoji": unicode_emoji,
                "mentionable": mentionable,
            },
            reason=reason,
        )

    def modify_guild_role_positions(
        self,
        guild_id: dt.Snowflake,
        *,
        id: dt.Snowflake,
        position: UnsetOr[t.Optional[int]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}/roles", guild_id=guild_id),
            json_params={"id": id, "position": position},
            reason=reason,
        )

    def modify_guild_role(
        self,
        guild_id: dt.Snowflake,
        role_id: dt.Snowflake,
        *,
        name: UnsetOr[t.Optional[str]] = Unset,
        permissions: UnsetOr[t.Optional[str]] = Unset,
        color: UnsetOr[t.Optional[int]] = Unset,
        hoist: UnsetOr[t.Optional[bool]] = Unset,
        icon: UnsetOr[t.Optional[str]] = Unset,
        unicode_emoji: UnsetOr[t.Optional[str]] = Unset,
        mentionable: UnsetOr[t.Optional[bool]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route(
                "PATCH", "/guilds/{guild_id}/roles/{role_id}", guild_id=guild_id, role_id=role_id
            ),
            json_params={
                "name": name,
                "permissions": permissions,
                "color": color,
                "hoist": hoist,
                "icon": icon,
                "unicode_emoji": unicode_emoji,
                "mentionable": mentionable,
            },
            reason=reason,
        )

    def modify_guild_mfa_level(
        self, guild_id: dt.Snowflake, *, level: dt.MFALevels, reason: t.Optional[str] = None
    ):
        return self.request(
            Route("POST", "/guilds/{guild_id}/mfa", guild_id=guild_id),
            json_params={"level": level},
            reason=reason,
        )

    def delete_guild_role(
        self, guild_id: dt.Snowflake, role_id: dt.Snowflake, reason: t.Optional[str] = None
    ):
        return self.request(
            Route(
                "DELETE", "/guilds/{guild_id}/roles/{role_id}", guild_id=guild_id, role_id=role_id
            ),
            reason=reason,
        )

    def get_guild_prune_count(
        self, guild_id: dt.Snowflake, *, days: int = 7, include_roles: UnsetOr[str] = Unset
    ):
        return self.request(
            Route("GET", "/guilds/{guild_id}/prune", guild_id=guild_id),
            query_params={"days": days, "include_roles": include_roles},
        )

    def begin_guild_prune(
        self,
        guild_id: dt.Snowflake,
        *,
        days: int = 7,
        compute_prune_count: bool = True,
        include_roles: UnsetOr[list[dt.Snowflake]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("POST", "/guilds/{guild_id}/prune", guild_id=guild_id),
            json_params={
                "days": days,
                "compute_prune_count": compute_prune_count,
                "include_roles": include_roles,
            },
            reason=reason,
        )

    def get_guild_voice_regions(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/regions", guild_id=guild_id))

    def get_guild_invites(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/invites", guild_id=guild_id))

    def get_guild_integrations(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/integrations", guild_id=guild_id))

    def delete_guild_integration(
        self, guild_id: dt.Snowflake, integration_id: dt.Snowflake, reason: t.Optional[str] = None
    ):
        return self.request(
            Route(
                "DELETE",
                "/guilds/{guild_id}/integrations/{integration_id}",
                guild_id=guild_id,
                integration_id=integration_id,
            ),
            reason=reason,
        )

    def get_guild_widget_settings(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/widget", guild_id=guild_id))

    def modify_guild_widget(
        self,
        guild_id: dt.Snowflake,
        *,
        enabled: UnsetOr[bool] = Unset,
        channel_id: UnsetOr[t.Optional[dt.Snowflake]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}/widget", guild_id=guild_id),
            json_params={"enabled": enabled, "channel_id": channel_id},
            reason=reason,
        )

    def get_guild_widget(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/widget.json", guild_id=guild_id))

    def get_guild_vanity_url(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/vanity-url", guild_id=guild_id))

    def get_guild_widget_image(self, guild_id: dt.Snowflake, *, style: UnsetOr[str] = Unset):
        return self.request(
            Route("GET", "/guilds/{guild_id}/widget.png", guild_id=guild_id),
            query_params={"style": style},
        )

    def get_guild_welcome_screen(self, guild_id: dt.Snowflake):
        return self.request(Route("GET", "/guilds/{guild_id}/welcome-screen", guild_id=guild_id))

    def modify_guild_welcome_screen(
        self,
        guild_id: dt.Snowflake,
        *,
        enabled: UnsetOr[t.Optional[bool]] = Unset,
        welcome_channels: UnsetOr[t.Optional[list[dt.WelcomeChannelData]]] = Unset,
        description: UnsetOr[t.Optional[str]] = Unset,
        reason: t.Optional[str] = None,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}/welcome-screen", guild_id=guild_id),
            json_params={
                "enabled": enabled,
                "welcome_channels": welcome_channels,
                "description": description,
            },
            reason=reason,
        )

    def modify_current_user_voice_state(
        self,
        guild_id: dt.Snowflake,
        *,
        channel_id: UnsetOr[dt.Snowflake] = Unset,
        suppress: UnsetOr[bool] = Unset,
        request_to_speak_timestamp: UnsetOr[t.Optional[str]] = Unset,
    ):
        return self.request(
            Route("PATCH", "/guilds/{guild_id}/voice-states/@me", guild_id=guild_id),
            json_params={
                "channel_id": channel_id,
                "suppress": suppress,
                "request_to_speak_timestamp": request_to_speak_timestamp,
            },
        )

    def modify_user_voice_state(
        self,
        guild_id: dt.Snowflake,
        user_id: dt.Snowflake,
        *,
        channel_id: dt.Snowflake,
        suppress: UnsetOr[bool] = Unset,
    ):
        return self.request(
            Route(
                "PATCH",
                "/guilds/{guild_id}/voice-states/{user_id}",
                guild_id=guild_id,
                user_id=user_id,
            ),
            json_params={"channel_id": channel_id, "suppress": suppress},
        )
